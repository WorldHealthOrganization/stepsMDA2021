ungroup()
depr_m_r_t
depr_m_reg <- STEPSClean %>%
group_by(region, sex) %>%
filter(sex == "Men") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = region) %>%
ungroup()
depr_m_reg
# calculating depression
depr_w <- STEPSClean %>%
group_by(agerange, sex) %>%
filter(sex == "Women") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE)
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange) %>%
ungroup()
depr_w
depr_w_u <- STEPSClean %>%
group_by(agerange2, sex, ur) %>%
filter(sex == "Women", ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff, ur)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange2) %>%
ungroup()
depr_w_u
depr_w_u_t <- STEPSClean %>%
group_by(ur, sex) %>%
filter(sex == "Women", ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = ur) %>%
ungroup()
depr_w_u_t
depr_w_u_t <- STEPSClean %>%
group_by(ur, sex) %>%
filter(sex == "Women", ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = ur) %>%
mutate(variable = "18–69", .before = "sex") %>%
ungroup()
depr_w_u_t
depr_w_r <- STEPSClean %>%
group_by(agerange2, sex, ur) %>%
filter(sex == "Women", ur == "Rural") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff, ur)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange2) %>%
ungroup()
depr_w_r
depr_w_r_t <- STEPSClean %>%
group_by(ur, sex) %>%
filter(sex == "Women", ur == "Rural") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = ur) %>%
mutate(variable = "18–69", .before = "sex") %>%
ungroup()
depr_w_r_t
depr_w_reg <- STEPSClean %>%
group_by(region, sex) %>%
filter(sex == "Women") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = region) %>%
ungroup()
depr_w_reg
# TOTAL for MEN and WOMEN
depr_m_t <- STEPSClean %>%
group_by(sex) %>%
filter(sex == "Men") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE)
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
mutate(variable = "18–69", .before = "sex") %>%
ungroup()
depr_m_t
depr_w_t <- STEPSClean %>%
group_by(sex) %>%
filter(sex == "Women") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE)
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE)%>%
mutate(variable = "18–69", .before = "sex") %>%
ungroup()
depr_w_t
depr_m_u$variable <- as.character(depr_m_u$variable) # changing class for allowing to combine
depr_m_u_t$variable <- as.character(depr_m_u_t$variable) # changing class for allowing to combine
depr_m_r$variable <- as.character(depr_m_r$variable) # changing class for allowing to combine
depr_m_r_t$variable <- as.character(depr_m_r_t$variable) # changing class for allowing to combine
depr_m_reg$variable <- as.character(depr_m_reg$variable) # changing class for allowing to combine
depr_m_t_j <- bind_rows(depr_m, depr_m_t, depr_m_u, depr_m_u_t, depr_m_r, depr_m_r_t, depr_m_reg)
depr_m_t_j
View(depr_m_t_j)
depr_m_t_j <- bind_rows(depr_m, depr_m_t, depr_m_u, depr_m_u_t, depr_m_r, depr_m_r_t, depr_m_reg) %>%
mutate(ID = row_number())
depr_m_t_j
View(depr_m_t_j)
depr_m_t_j <- bind_rows(depr_m, depr_m_t, depr_m_u, depr_m_u_t, depr_m_r, depr_m_r_t, depr_m_reg) %>%
mutate(ID = row_number(), .before = "variable")
depr_m_t_j
depr_w_u$variable <- as.character(depr_w_u$variable) # changing class for allowing to combine
depr_w_u_t$variable <- as.character(depr_w_u_t$variable) # changing class for allowing to combine
depr_w_r$variable <- as.character(depr_w_r$variable) # changing class for allowing to combine
depr_w_r_t$variable <- as.character(depr_w_r_t$variable) # changing class for allowing to combine
depr_w_reg$variable <- as.character(depr_w_reg$variable) # changing class for allowing to combine
depr_w_t_j <- bind_rows(depr_w, depr_w_t, depr_w_u, depr_w_u_t, depr_w_r, depr_w_r_t, depr_w_reg) %>%
mutate(ID = row_number(), .before = "variable")
depr_w_t_j
depr_b <- STEPSClean %>%
group_by(agerange) %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE)
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange) %>%
ungroup()
depr_b
depr_b_u <- STEPSClean %>%
group_by(agerange2, ur) %>%
filter(ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff, ur)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange2) %>%
ungroup()
depr_b_u
depr_b_u_t <- STEPSClean %>%
group_by(ur) %>%
filter(ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = ur) %>%
ungroup()
depr_b_u_t
depr_b_r <- STEPSClean %>%
group_by(agerange2, ur) %>%
filter(ur == "Rural") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff, ur)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange2) %>%
ungroup()
depr_w_r_t
depr_b_u <- STEPSClean %>%
group_by(agerange2, ur) %>%
filter(ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff, ur)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange2) %>%
ungroup()
depr_b_u
depr_b_u_t <- STEPSClean %>%
group_by(ur) %>%
filter(ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = ur) %>%
ungroup()
depr_b_u_t
depr_b_u_t <- STEPSClean %>%
group_by(ur) %>%
filter(ur == "Urban") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = ur) %>%
mutate(variable = "18–69", .before = "n") %>%
ungroup()
depr_b_u_t
depr_b_r <- STEPSClean %>%
group_by(agerange2, ur) %>%
filter(ur == "Rural") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff, ur)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = agerange2) %>%
ungroup()
depr_b_r
depr_b_r_t <- STEPSClean %>%
group_by(ur) %>%
filter(ur == "Rural") %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = ur) %>%
mutate(variable = "18–69", .before = "n") %>%
ungroup()
depr_b_r_t
depr_b_reg <- STEPSClean %>%
group_by(region) %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE) # complete vartype = c("se", "ci", "var", "cv")
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
rename(variable = region) %>%
ungroup()
depr_b_reg
depr_b_t <- STEPSClean %>%
summarise(n = unweighted(n()),
mean = survey_mean(depression, vartype = c("se", "ci"), deff = TRUE)
) %>%
mutate(mean = round(100 * mean,1)) %>%
mutate(mean_se = round(100 * mean_se,1)) %>%
mutate(mean_low = round(100 * mean_low,1)) %>%
mutate(mean_upp = round(100 * mean_upp,1)) %>%
mutate(mean_deff = round(mean_deff,2)) %>%
select(-c(mean_se, mean_deff)) %>%
unite("95% CI", mean_low, mean_upp, sep = "–", remove = TRUE) %>%
mutate(variable = "18–69", .before = "n") %>%
ungroup()
depr_b_t
depr_b_u$variable <- as.character(depr_b_u$variable) # changing class for allowing to combine
depr_b_u_t$variable <- as.character(depr_b_u_t$variable) # changing class for allowing to combine
depr_b_r$variable <- as.character(depr_b_r$variable) # changing class for allowing to combine
depr_b_r_t$variable <- as.character(depr_b_r_t$variable) # changing class for allowing to combine
depr_b_reg$variable <- as.character(depr_b_reg$variable) # changing class for allowing to combine
depr_b_t_j <- bind_rows(depr_b, depr_b_t, depr_b_u, depr_b_u_t, depr_b_r, depr_b_r_t, depr_b_reg) %>%
mutate(ID = row_number(), .before = "variable")
depr_b_t_j
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j, by = "ID") %>%
left_join(depr_b_t_j, by = "ID") %>%
select(-c(sex.x, sex.y))
depr_m_w_b
View(depr_m_w_b)
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j, by = "ID", "variable") %>%
left_join(depr_b_t_j, by = "ID", "variable") %>%
select(-c(sex.x, sex.y))
depr_m_w_b
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j, by = "ID", "variable") %>%
left_join(depr_b_t_j, by = "ID", "variable") %>%
select(-c(sex.x, sex.y))
depr_m_w_b
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j, by = "ID" & "variable") %>%
left_join(depr_b_t_j, by = "ID" & "variable") %>%
select(-c(sex.x, sex.y))
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j, by = "ID, variable") %>%
left_join(depr_b_t_j, by = "ID, variable") %>%
select(-c(sex.x, sex.y))
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j) %>%
left_join(depr_b_t_j) %>%
select(-c(sex.x, sex.y))
depr_m_w_b
depr_b_t_j
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j) %>%
left_join(depr_b_t_j)# %>%
#select(-c(sex.x, sex.y))
depr_m_w_b
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j, by = c("ID", "variable")) %>%
left_join(depr_b_t_j, by = c("ID", "variable")) %>%
select(-c(sex.x, sex.y))
depr_m_w_b
depr_m_w_b <- depr_m_w_b[c(1:4,6:18,5),]
depr_m_w_b
# either create a separate vector for names or add them directly into the kbl function
names_spaced <- c("Variables", "n","% Depressed","95% CI","n","% Depressed","95% CI","n","% Depressed","95% CI")
table_depr <- kbl(depr_m_w_b,
#caption = "<center>WHS Depression</center>",
align = "lccccccccc",
#another option is to add col names directly:
#col.names = c("Age group<br/> (years)","n","% Depressed","95% CI","n","% Depressed","95% CI","n","% Depressed","95% CI"),
col.names = names_spaced,
booktabs = T,
digits = 1,
escape = F) %>% ## disable HTML escape to make <br/> work
#kable_classic(full_width = F) %>%
kable_paper(full_width = F) %>%
row_spec(18, bold = T) %>%
add_header_above(c(" ", "Men" = 3, "Women" = 3, "Both sexes" = 3), bold = T) %>%
add_header_above(c("WHS Depression" = 10), bold = T) %>%
group_rows(group_label = "Age groups (years)", start_row = 1, end_row = 4, indent=F,
#escape = F, label_row_css="padding-left: 50px"
) %>%
group_rows(group_label = "Type of settlement (Urban)", start_row = 5, end_row = 7, indent=F) %>%
group_rows(group_label = "Type of settlement (Rural)", start_row = 8, end_row = 10, indent=F) %>%
group_rows(group_label = "Macroregions", start_row = 11, end_row = 17, indent=F) %>%
group_rows(group_label = "Total", start_row = 18, end_row = 18, indent=F) #%>%
depr_m_w_b <- depr_m_t_j %>%
left_join(depr_w_t_j, by = c("ID", "variable")) %>%
left_join(depr_b_t_j, by = c("ID", "variable")) %>%
select(-c(sex.x, sex.y, ID))
depr_m_w_b
View(depr_m_w_b)
depr_m_w_b <- depr_m_w_b[c(1:4,6:18,5),]
depr_m_w_b
# either create a separate vector for names or add them directly into the kbl function
names_spaced <- c("Variables", "n","% Depressed","95% CI","n","% Depressed","95% CI","n","% Depressed","95% CI")
table_depr <- kbl(depr_m_w_b,
#caption = "<center>WHS Depression</center>",
align = "lccccccccc",
#another option is to add col names directly:
#col.names = c("Age group<br/> (years)","n","% Depressed","95% CI","n","% Depressed","95% CI","n","% Depressed","95% CI"),
col.names = names_spaced,
booktabs = T,
digits = 1,
escape = F) %>% ## disable HTML escape to make <br/> work
#kable_classic(full_width = F) %>%
kable_paper(full_width = F) %>%
row_spec(18, bold = T) %>%
add_header_above(c(" ", "Men" = 3, "Women" = 3, "Both sexes" = 3), bold = T) %>%
add_header_above(c("WHS Depression" = 10), bold = T) %>%
group_rows(group_label = "Age groups (years)", start_row = 1, end_row = 4, indent=F,
#escape = F, label_row_css="padding-left: 50px"
) %>%
group_rows(group_label = "Type of settlement (Urban)", start_row = 5, end_row = 7, indent=F) %>%
group_rows(group_label = "Type of settlement (Rural)", start_row = 8, end_row = 10, indent=F) %>%
group_rows(group_label = "Macroregions", start_row = 11, end_row = 17, indent=F) %>%
group_rows(group_label = "Total", start_row = 18, end_row = 18, indent=F) #%>%
table_depr
table_depr <- kbl(depr_m_w_b,
#caption = "<center>WHS Depression</center>",
align = "lccccccccc",
#another option is to add col names directly:
#col.names = c("Age group<br/> (years)","n","% Depressed","95% CI","n","% Depressed","95% CI","n","% Depressed","95% CI"),
col.names = names_spaced,
booktabs = T,
digits = 1,
escape = F) %>% ## disable HTML escape to make <br/> work
#kable_classic(full_width = F) %>%
kable_paper(full_width = F) %>%
row_spec(7, 10, 18, bold = T) %>%
add_header_above(c(" ", "Men" = 3, "Women" = 3, "Both sexes" = 3), bold = T) %>%
add_header_above(c("WHS Depression" = 10), bold = T) %>%
group_rows(group_label = "Age groups (years)", start_row = 1, end_row = 4, indent=F,
#escape = F, label_row_css="padding-left: 50px"
) %>%
group_rows(group_label = "Type of settlement (Urban)", start_row = 5, end_row = 7, indent=F) %>%
group_rows(group_label = "Type of settlement (Rural)", start_row = 8, end_row = 10, indent=F) %>%
group_rows(group_label = "Macroregions", start_row = 11, end_row = 17, indent=F) %>%
group_rows(group_label = "Total", start_row = 18, end_row = 18, indent=F) #%>%
table_depr
table_depr <- kbl(depr_m_w_b,
#caption = "<center>WHS Depression</center>",
align = "lccccccccc",
#another option is to add col names directly:
#col.names = c("Age group<br/> (years)","n","% Depressed","95% CI","n","% Depressed","95% CI","n","% Depressed","95% CI"),
col.names = names_spaced,
booktabs = T,
digits = 1,
escape = F) %>% ## disable HTML escape to make <br/> work
#kable_classic(full_width = F) %>%
kable_paper(full_width = F) %>%
row_spec(c(7, 10, 18), bold = T) %>%
add_header_above(c(" ", "Men" = 3, "Women" = 3, "Both sexes" = 3), bold = T) %>%
add_header_above(c("WHS Depression" = 10), bold = T) %>%
group_rows(group_label = "Age groups (years)", start_row = 1, end_row = 4, indent=F,
#escape = F, label_row_css="padding-left: 50px"
) %>%
group_rows(group_label = "Type of settlement (Urban)", start_row = 5, end_row = 7, indent=F) %>%
group_rows(group_label = "Type of settlement (Rural)", start_row = 8, end_row = 10, indent=F) %>%
group_rows(group_label = "Macroregions", start_row = 11, end_row = 17, indent=F) %>%
group_rows(group_label = "Total", start_row = 18, end_row = 18, indent=F) #%>%
table_depr
