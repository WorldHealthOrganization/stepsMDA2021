mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r, fill = list(mean = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r, fill = list(mean = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, fill = list(mean = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, fill = list(mean = 0))
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup()
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex,
fill = list(mean = 0, freq = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r,
fill = list(n =0, mean = 0, freq = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_m_w
df <- data %>% select(c(
"agerange", "agerange2", "age", "sex", "valid", "ur", "region",
"c5"
))
# Changing the dash to an en dash in age ranges: "-" to "–"
# This is needed for the final output tables
unique(df$agerange)
unique(df$agerange2)
library(stringr)
df <- df %>%
mutate(across("agerange", str_replace, "-", "–")) %>%
mutate(across("agerange2", str_replace, "-", "–"))
# Including only those respondents that are valid==1
df <- subset(df, valid==1)
dim(df)
table(df$valid)
df <- df %>%
mutate(c5_r = ifelse(df$c5==1, "1) No formal schooling",
ifelse(df$c5==2, "2) Less than primary school (1-4 form)",
ifelse(df$c5==3, "3) Primary school completed (5-9 form)",
ifelse(df$c5==4, "4) Secondary school completed (10-11 form, lyceum)",
ifelse(df$c5==5, "5) Secondary professional (college)",
ifelse(df$c5==6, "6) University degree (bachelor) / Associate of Science",
ifelse(df$c5==7, "7) Post graduate degree (Masters degree, PhD)", NA)))))))) %>%
filter(!is.na(c5_r))
table(df$c5_r)
table(is.na(df$c5_r))
df$cln <- if_else(is.na(df$c5_r), 2, 1)
table(df$cln)
table(is.na(df$cln)) # checking for NA
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, character(sex), c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, as.character(sex), c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_m_w
df$sex <- as.character(sex)
df$sex <- as.character(df$sex)
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup()
ceduhigh_m_w
ceduhigh_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c5_r)
ceduhigh_m_w
ceduhigh_b <- df %>%
filter(cln == 1) %>%
group_by(agerange, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_b
ceduhigh_b <- df %>%
filter(cln == 1) %>%
group_by(agerange, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c5_r,
fill = list(mean = 0, freq = 0)) %>%
mutate(n = sum(n))
ceduhigh_b
ceduhigh_b <- df %>%
filter(cln == 1) %>%
group_by(agerange, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
#mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c5_r,
fill = list(mean = 0, freq = 0)) %>%
mutate(n = sum(n))
ceduhigh_b
ceduhigh_b <- df %>%
filter(cln == 1) %>%
group_by(agerange, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c5_r,
fill = list(mean = 0, freq = 0))
ceduhigh_b
df <- data %>% select(c(
"agerange", "agerange2", "age", "sex", "valid", "ur", "region",
"c7"
))
# Changing the dash to an en dash in age ranges: "-" to "–"
# This is needed for the final output tables
unique(df$agerange)
unique(df$agerange2)
library(stringr)
df <- df %>%
mutate(across("agerange", str_replace, "-", "–")) %>%
mutate(across("agerange2", str_replace, "-", "–"))
# Including only those respondents that are valid==1
df <- subset(df, valid==1)
dim(df)
table(df$valid)
df <- df %>%
mutate(c5_r = ifelse(df$c5==1, "1) No formal schooling",
ifelse(df$c5==2, "2) Less than primary school (1-4 form)",
ifelse(df$c5==3, "3) Primary school completed (5-9 form)",
ifelse(df$c5==4, "4) Secondary school completed (10-11 form, lyceum)",
ifelse(df$c5==5, "5) Secondary professional (college)",
ifelse(df$c5==6, "6) University degree (bachelor) / Associate of Science",
ifelse(df$c5==7, "7) Post graduate degree (Masters degree, PhD)", NA)))))))) %>%
filter(!is.na(c5_r))
df <- df %>%
mutate(c7_r = ifelse(df$c7==1, "1) Never Married",
ifelse(df$c7==2, "2) Currently married",
ifelse(df$c7==3, "3) Separated",
ifelse(df$c7==4, "4) Divorced",
ifelse(df$c7==5, "5) Widowed",
ifelse(df$c7==6, "6) Cohabitating", NA))))))) %>%
filter(!is.na(c7_r))
table(df$c7_r)
table(is.na(df$c7_r))
df$cln <- if_else(is.na(df$c7_r), 2, 1)
table(df$cln)
table(is.na(df$cln)) # checking for NA
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c5_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup()
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup()
cmaritalstatus_m_w
View(cmaritalstatus_m_w)
df$sex <- as.character(df$sex)
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup()
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c7_r,
fill = list(mean = 0, freq = 0))
cmaritalstatus_m_w
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c7_r,
fill = list(mean = 0, freq = 0))
cmaritalstatus_m_w
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange,
fill = list(mean = 0, freq = 0))
cmaritalstatus_m_w
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(c7_r,
fill = list(mean = 0, freq = 0))
cmaritalstatus_m_w
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c7_r,
fill = list(mean = 0, freq = 0))
cmaritalstatus_m_w
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c7_r, n,
fill = list(mean = 0, freq = 0))
cmaritalstatus_m_w
cmaritalstatus_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c7_r,
fill = list(mean = 0, freq = 0))
cmaritalstatus_m_w
cmaritalstatus_b <- df %>%
filter(cln == 1) %>%
group_by(agerange, c7_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c7_r,
fill = list(mean = 0, freq = 0))
cmaritalstatus_b
View(cmaritalstatus_b)
df <- data %>% select(c(
"agerange", "agerange2", "age", "sex", "valid", "ur", "region",
"c8"
))
# Changing the dash to an en dash in age ranges: "-" to "–"
# This is needed for the final output tables
unique(df$agerange)
unique(df$agerange2)
library(stringr)
df <- df %>%
mutate(across("agerange", str_replace, "-", "–")) %>%
mutate(across("agerange2", str_replace, "-", "–"))
# Including only those respondents that are valid==1
df <- subset(df, valid==1)
dim(df)
table(df$valid)
df <- df %>%
mutate(c8_r = ifelse(df$c8==1, "1) Government employee",
ifelse(df$c8==2, "2) Non-government employee",
ifelse(df$c8==3, "3) Self-employed",
ifelse(df$c8==4 | df$c8== 5 | df$c8==6 |
df$c8==7 | df$c8==8 | df$c8==9, "4) Unpaid", NA))))) %>%
filter(!is.na(c8_r))
table(df$c8_r)
table(is.na(df$c8_r))
df$cln <- if_else(is.na(df$c8_r), 2, 1)
table(df$cln)
table(is.na(df$cln)) # checking for NA
cworkpaid_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c8_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c8_r,
fill = list(mean = 0, freq = 0))
cworkpaid_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c8_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup()
cworkpaid_m_w
View(cworkpaid_m_w)
cworkpaid_b <- df %>%
filter(cln == 1) %>%
group_by(agerange, c8_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() #%>%
cworkpaid_b
df <- data %>% select(c(
"agerange", "agerange2", "age", "sex", "valid", "ur", "region",
"c8"
))
# Changing the dash to an en dash in age ranges: "-" to "–"
# This is needed for the final output tables
unique(df$agerange)
unique(df$agerange2)
library(stringr)
df <- df %>%
mutate(across("agerange", str_replace, "-", "–")) %>%
mutate(across("agerange2", str_replace, "-", "–"))
# Including only those respondents that are valid==1
df <- subset(df, valid==1)
dim(df)
table(df$valid)
df <- df %>%
mutate(c8_r = ifelse(df$c8==4, "1) Non-paid",
ifelse(df$c8==5, "2) Student",
ifelse(df$c8==6, "3) Homemaker",
ifelse(df$c8==7, "4) Retired",
ifelse(df$c8==8, "4) Unemployed able to work",
ifelse(df$c8==9, "4) Unemployed unable to work", NA))))))) %>%
filter(!is.na(c8_r))
table(df$c8_r)
df$cln <- if_else(is.na(df$c8_r), 2, 1)
table(df$cln)
table(is.na(df$cln)) # checking for NA
cworknotpaid_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c8_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() #%>%
cworknotpaid_m_w
View(cworknotpaid_m_w)
cworknotpaid_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c8_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c8_r,
fill = list(mean = 0, freq = 0))
cworknotpaid_m_w
df$sex <- as.character(df$sex)
cworknotpaid_m_w <- df %>%
filter(cln == 1) %>%
group_by(agerange, sex, c8_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, sex, c8_r,
fill = list(mean = 0, freq = 0))
cworknotpaid_m_w
cworknotpaid_b <- df %>%
filter(cln == 1) %>%
group_by(agerange, c8_r) %>%
summarise(n = n()) %>%
mutate(freq = n / sum(n)) %>%
mutate(mean = round(100 * freq,1)) %>%
mutate(n = sum(n)) %>% # summing n to show all answer choices together like in Data Book
ungroup() %>%
complete(agerange, c8_r,
fill = list(mean = 0, freq = 0))
cworknotpaid_b
